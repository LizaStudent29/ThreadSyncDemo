# Thread Synchronization Demo

## üéØ –¶–µ–ª—å –∑–∞–¥–∞–Ω–∏—è
- –ù–∞—É—á–∏—Ç—å—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `synchronized`, `wait()`, `notify()` –∏ `notifyAll()` –≤ Java.
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç –≥–æ–Ω–æ–∫ –¥–∞–Ω–Ω—ã—Ö (race condition).
- –ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ deadlock.
- –°—Ä–∞–≤–Ω–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏ –Ω–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

---

## ‚öôÔ∏è –û–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö.

### –ö–ª—é—á–µ–≤—ã–µ –∫–ª–∞—Å—Å—ã
- **`DataCollector`** ‚Äî –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π —ë–º–∫–æ—Å—Ç—å—é, –∑–∞—â–∏—â—ë–Ω–Ω–∞—è —Å –ø–æ–º–æ—â—å—é `synchronized`.
  - –ú–µ—Ç–æ–¥—ã:
    - `collectItem(Item item)` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ (–æ–∂–∏–¥–∞–µ—Ç, –µ—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∞);
    - `takeItem()` ‚Äî –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ (–æ–∂–∏–¥–∞–µ—Ç, –µ—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞);
    - `incrementProcessed()` ‚Äî —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á—ë—Ç—á–∏–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤;
    - `isAlreadyProcessed(String key)` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —ç–ª–µ–º–µ–Ω—Ç–∞.
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `wait()` –∏ `notifyAll()` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–∞–º–∏ –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤ –∏ –∫–æ–Ω—Å—é–º–µ—Ä–æ–≤.

- **`DataCollectorUnsafe`** ‚Äî –≤–µ—Ä—Å–∏—è –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –≥–æ–Ω–∫–∞—Ö –¥–∞–Ω–Ω—ã—Ö.

- **`DeadlockSafeTransfer`** ‚Äî –ø—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤ –º–µ–∂–¥—É –¥–≤—É–º—è –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏ —Å –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ–º –≤–∑–∞–∏–º–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (deadlock) —Å –ø–æ–º–æ—â—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ –∑–∞—Ö–≤–∞—Ç–∞ –∑–∞–º–∫–æ–≤.

- **`Workers`** ‚Äî –∫–ª–∞—Å—Å—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–æ—Ç–æ–∫–æ–≤-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π –∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π.

- **`Main`** ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç—Ä–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è:
  1. –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π.
  2. –ë–µ–Ω—á–º–∞—Ä–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –≤–µ—Ä—Å–∏–π.
  3. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è deadlock.

---

## üß© –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### –ó–∞—â–∏—Ç–∞ –æ—Ç –≥–æ–Ω–æ–∫ –¥–∞–Ω–Ω—ã—Ö
- –ú–µ—Ç–æ–¥—ã `collectItem`, `takeItem`, `incrementProcessed` –∏ `isAlreadyProcessed` –æ–±—ä—è–≤–ª–µ–Ω—ã –∫–∞–∫ `synchronized`.
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–æ—á–µ—Ä–µ–¥—å, –º–Ω–æ–∂–µ—Å—Ç–≤–æ `processed`, —Å—á—ë—Ç—á–∏–∫) –∞—Ç–æ–º–∞—Ä–Ω—ã.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –µ–¥–∏–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä (`this`), —á—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö.

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞–º–∏ —á–µ—Ä–µ–∑ wait()/notifyAll()
- –ü–æ—Ç–æ–∫-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è (`wait()`), –µ—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –ø–æ–ª–Ω–∞.
- –ü–æ—Ç–æ–∫-–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, –µ—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞.
- –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∏–ª–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `notifyAll()`, —á—Ç–æ–±—ã –ø—Ä–æ–±—É–¥–∏—Ç—å –≤—Å–µ –æ–∂–∏–¥–∞—é—â–∏–µ –ø–æ—Ç–æ–∫–∏.

### –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ Deadlock
- –í `DeadlockSafeTransfer` –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤—Å–µ–≥–¥–∞ –±–µ—Ä—É—Ç—Å—è –≤ –æ–¥–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ (–ø–æ ID –∞–∫–∫–∞—É–Ω—Ç–∞).
- –≠—Ç–æ –∏—Å–∫–ª—é—á–∞–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö –ø–æ—Ç–æ–∫–æ–≤.

